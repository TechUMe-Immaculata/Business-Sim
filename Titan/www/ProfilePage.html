<!DOCTYPE html>
<html>
  <head>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
     <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.3.4.min.js"></script>
	
    <title>Profile</title>

    <!--does not work with internet explorer 6 and 7 for jquery 2.1-->
    <script type="text/javascript" src="js/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="js/jquery.touchSwipe.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
      <!--Link to the css file Home.css -->
    <link rel="stylesheet" type="text/css" href="css/ProfilePage.css"/>
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">


  </head>
  <body id="mainBody">

    <div class="container">
      <div id="sidebar">
          <ul>
              <li><a><img id="homeButton" src = "img/homeButton.jpg"/> Home </a></li>
              <li><a><img id="friendsPic" src = "img/friendsButton.jpg"/> Friends</a></li>
              <li><a><img id="settingsPic" src = "img/settingsButton.jpg"/> Settings</a></li>
              <li><a><img id="notificationsPic" src = "img/notficationsButton.jpg"/> Notfications</a></li>
              <li><a href="#">Sign Out</a></li>
          </ul>
      </div>
      
      <div class="main-content">
          <div class="swipe-area">
            <p id="screenDescription">Your Profile</p>
          </div>
          <a href="#" data-toggle=".container" id="sidebar-toggle">
              <span class="bar"></span>
              <span class="bar"></span>
              <span class="bar"></span>
          </a>

          <div class="content">
            <!-- profilePicture will be a local file that can be changed by the player -->
            <img id="userProfilePicture" src = "localContent/profilePicture.jpg"/>
            <div> <p id="profileInfoName"></p> </div>
            <div> <p id="profileInfoCompanyName">Company: Stark Industries </p> </div>
            <div> <p id="profileInfoGamesWon"> Games Won: Thrones </p> </div>
            <div> <p id="profileInfoGamesLost"> Games Lost: My Head </p> </div>
          </div>

<script>

Parse.initialize("Z8KSlQyzuWQKn449idqkqNYbiH7HWy09US0ws0Ci", "zDzVGtrgvtFN0Sxs6YjkuOq9leznJ4UguavX6bdt");
    // create company 
    document.getElementById("profileInfoName").innerHTML ="Name: " + name.toString();

    // get user id and company 
    var currentUser = Parse.User.current();
    var name = currentUser.get("username");
    var myUserId = currentUser.id;
    var companyElements;
    var Company = Parse.Object.extend("Company");
    var query = new Parse.Query(Company);
    //var myImage = document.getElementById('userProfilePicture');
    //var profilePic = currentUser.get("profilePicture");
    //console.log(currentUser.get("profilePicture"));
   // $("userProfilePicture")[0].src = profilePic.url();
    var file = currentUser.get("profilePicture").url;
    document.getElementById("userProfilePicture").innerHTML = file.url;
    query.equalTo("userId", myUserId);
  

   
    query.find({
  success: function(results) {
  var companyElements = results[0];
  var companyname = companyElements.get("company");
  document.getElementById("profileInfoCompanyName").innerHTML ="Company: " + companyname.toString();
  console.log(companyElements.id);

  },
  error: function(error){

    console.log("error    = " + error.code + "    " + error.message );
  response.error("shit");
  }
});

</script>
  </body>

  <head>
    <script type="text/javascript" src="js/ProfilePage.js"></script>
  </head>
  
</html>